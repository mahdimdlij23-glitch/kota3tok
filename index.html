<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kota3tok</title>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
/* ====== ØªØµÙ…ÙŠÙ… Ø¹Ø§Ù… ====== */
body{
  margin:0;
  font-family: Arial, sans-serif;
  background:#01010a;
  color:#fff;
  text-align:center;
}
header{
  background: linear-gradient(135deg,#020824,#000);
  padding:25px 15px;
  border-bottom:2px solid #0a7cff;
  box-shadow: 0 4px 6px rgba(0,0,0,0.5);
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.logo{
  font-size:28px;
  font-weight:bold;
  color:#0a7cff;
}
.logo span{ color:#fff; margin-left:6px; font-size:24px;}
.logo img{ width:36px; vertical-align:middle; margin-left:6px;}
.search-bar{
  padding:5px 10px;
  border-radius:12px;
  border:none;
  font-size:15px;
}
section{ padding:20px 10px; }
.accordion{
  background:#0b122e;
  color:#4da3ff;
  cursor:pointer;
  padding:18px 20px;
  width:90%;
  border:none;
  text-align:right;
  outline:none;
  font-size:18px;
  border-radius:12px;
  margin:12px auto;
  transition:0.3s;
  box-shadow: 0 2px 5px rgba(0,0,0,0.4);
}
.accordion:hover{ background: rgba(77,163,255,0.15); }
.panel{
  max-height:0;
  overflow:hidden;
  transition:max-height 0.3s ease;
  background:#111a3a;
  margin:0 auto 18px auto;
  border-radius:12px;
  width:90%;
  text-align:right;
  padding:0 15px;
  box-shadow: inset 0 0 5px rgba(77,163,255,0.1);
}
.item{
  display:flex;
  justify-content:space-between;
  padding:12px 0;
  border-bottom:1px solid #1e2a5a;
  font-size:16px;
  transition:0.2s;
}
.item:last-child{ border-bottom:none; }
.item:hover{
  background: rgba(77,163,255,0.15);
  border-radius:8px;
}
.price-note{
  font-size:14px;
  color:#0a7cff;
  margin-bottom:8px;
  font-weight:bold;
  text-align:right;
}
button.contact{
  margin-top:20px;
  background:#0a7cff;
  color:white;
  border:none;
  padding:16px 25px;
  border-radius:12px;
  font-size:17px;
  cursor:pointer;
  width:90%;
  box-shadow: 0 3px 6px rgba(0,0,0,0.4);
}
button.contact:hover{ background:#0056b3; }

/* ====== Ø²Ø± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙˆØ§Ù„Ù„ÙˆØ­Ø© ====== */
#menuBtn{
  position:fixed;
  top:15px;
  right:15px;
  font-size:28px;
  cursor:pointer;
  z-index:1000;
  color:#0a7cff;
}
#adminPanel{
  display:none;
  position:fixed;
  top:50px;
  right:10px;
  background:#111a3a;
  padding:15px;
  border-radius:12px;
  width:260px;
  box-shadow:0 4px 8px rgba(0,0,0,0.5);
  z-index:1000;
}
#adminPanel input, #adminPanel select{
  width:100%;
  margin-bottom:8px;
  padding:6px;
  border-radius:5px;
  border:none;
}
#adminPanel button{
  width:100%;
  padding:8px;
  border-radius:6px;
  background:#0a7cff;
  color:#fff;
  border:none;
  cursor:pointer;
  margin-bottom:6px;
}
#adminPanel button:hover{ background:#0056b3; }

/* ====== Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ù„ÙƒÙ„ Ù‚Ø³Ù… ====== */
.section-icon{
  margin-left:6px;
  font-size:18px;
}
</style>
</head>
<body>

<header>
  <div class="logo">
    Kota3<span>tok</span>
    <img src="https://cdn-icons-png.flaticon.com/512/1250/1250624.png" alt="TukTuk">
  </div>
  <input type="text" id="searchInput" class="search-bar" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù‚Ø·Ø¹...">
</header>

<section>
  <button class="accordion">Ù‚Ø·Ø¹ ØºÙŠØ§Ø± <span class="section-icon">ğŸï¸</span></button>
  <div class="price-note">ğŸ“Œ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶ Ù‡Ùˆ Ø³Ø¹Ø± Ø§Ù„ÙˆÙƒØ§Ù„Ø© +2$</div>
  <div class="panel" id="spareParts"></div>

  <button class="accordion">Ø²ÙŠÙ†Ø© ÙˆØ¥ÙƒØ³Ø³ÙˆØ§Ø± <span class="section-icon">â­</span></button>
  <div class="price-note">ğŸ“Œ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶ Ù‡Ùˆ Ø³Ø¹Ø± Ø§Ù„ÙˆÙƒØ§Ù„Ø© +2$</div>
  <div class="panel" id="accessories"></div>

  <button class="contact" onclick="window.location.href='https://wa.me/96100000000'">
    ğŸ“ Ø±Ø§Ø³Ù„Ù†Ø§ ÙˆØ§ØªØ³Ø§Ø¨
  </button>
</section>

<div id="menuBtn">â˜°</div>
<div id="adminPanel">
  <input type="password" id="adminPass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
  <button id="loginBtn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>

  <div id="addForm" style="display:none;">
    <input type="text" id="itemName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù‚Ø·Ø¹Ø©">
    <input type="text" id="itemPrice" placeholder="Ø§Ù„Ø³Ø¹Ø±">
    <select id="itemCategory">
      <option value="spareParts">Ù‚Ø·Ø¹ ØºÙŠØ§Ø±</option>
      <option value="accessories">Ø²ÙŠÙ†Ø© ÙˆØ¥ÙƒØ³Ø³ÙˆØ§Ø±</option>
    </select>
    <button id="addItemBtn">Ø£Ø¶Ù Ø§Ù„Ù‚Ø·Ø¹Ø©</button>
    <select id="sortFilter">
      <option value="">-- ØªØ±ØªÙŠØ¨ / ÙÙ„ØªØ± --</option>
      <option value="priceAsc">Ø§Ù„Ø³Ø¹Ø± Ù…Ù† Ø§Ù„Ø£Ù‚Ù„ Ù„Ù„Ø£Ø¹Ù„Ù‰</option>
      <option value="priceDesc">Ø§Ù„Ø³Ø¹Ø± Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„Ù„Ø£Ù‚Ù„</option>
      <option value="nameAsc">Ø§Ù„Ø§Ø³Ù… Ø£Ø¨Ø¬Ø¯ÙŠ</option>
      <option value="sparePartsOnly">Ù‚Ø·Ø¹ ØºÙŠØ§Ø± ÙÙ‚Ø·</option>
      <option value="accessoriesOnly">Ø²ÙŠÙ†Ø© ÙÙ‚Ø·</option>
    </select>
  </div>
</div>

<footer>
  Â© 2025 Kota3tok - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©
</footer>

<script>
// ====== Firebase Setup (Ù…Ø¯Ù…Ø¬ Ø¨Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ù„ÙŠ Ø¨Ø¹ØªÙ‡) ======
const firebaseConfig = {
  apiKey: "AIzaSyDoi4EAAdWJ9BUbLc3mP1zuNXXUd7a4Dn4",
  authDomain: "kota3tok.firebaseapp.com",
  projectId: "kota3tok",
  storageBucket: "kota3tok.firebasestorage.app",
  messagingSenderId: "322095191128",
  appId: "1:322095191128:web:f5e06d891041097302662d",
  measurementId: "G-YN09RQSFBK"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// ====== Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù„ÙŠØ© Ù‚Ø¨Ù„ Firebase ======
let spareParts = [];
let accessories = [];

// ====== Ø¯ÙˆØ§Ù„ Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù‚Ø·Ø¹ ======
function populateItems(array, containerId){
  const container = document.getElementById(containerId);
  container.innerHTML = "";
  array.forEach(item=>{
    const div = document.createElement("div");
    div.className="item";
    div.innerHTML = `<span>${item.name}</span><span>${item.price} <button style="margin-left:5px;" onclick="deleteItem('${containerId}','${item.name}')">âŒ</button></span>`;
    container.appendChild(div);
  });
}

// ====== Ø­Ø°Ù Ø§Ù„Ù‚Ø·Ø¹ ======
function deleteItem(containerId, name){
  if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù‚Ø·Ø¹Ø©ØŸ")){
    const collection = containerId;
    db.collection(collection).where("name","==",name).get().then(snapshot=>{
      snapshot.forEach(doc=>{ doc.ref.delete(); });
    });
  }
}

// ====== Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Firebase ======
function fetchItems(){
  db.collection("spareParts").onSnapshot(snapshot=>{
    spareParts.length=0;
    snapshot.forEach(doc=>{ spareParts.push(doc.data()); });
    populateItems(spareParts,"spareParts");
  });
  db.collection("accessories").onSnapshot(snapshot=>{
    accessories.length=0;
    snapshot.forEach(doc=>{ accessories.push(doc.data()); });
    populateItems(accessories,"accessories");
  });
}
fetchItems();

// ====== Ø¥Ø¯Ø§Ø±Ø© Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ======
const menuBtn = document.getElementById("menuBtn");
const adminPanel = document.getElementById("adminPanel");
const loginBtn = document.getElementById("loginBtn");
const addForm = document.getElementById("addForm");
const adminPass = document.getElementById("adminPass");
const addItemBtn = document.getElementById("addItemBtn");
const ADMIN_PASSWORD = "Kt3-Admin-01";

menuBtn.onclick = ()=>{ adminPanel.style.display = adminPanel.style.display==="none"?"block":"none"; }

loginBtn.onclick = ()=>{
  if(adminPass.value === ADMIN_PASSWORD){
    addForm.style.display="block";
    alert("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ âœ…");
  } else{
    alert("ÙƒÙ„Ù…Ø© Ø³Ø± Ø®Ø§Ø·Ø¦Ø© âŒ");
  }
}

// ====== Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù‚Ø·Ø¹ ======
addItemBtn.onclick = ()=>{
  const name = document.getElementById("itemName").value;
  const price = document.getElementById("itemPrice").value;
  const category = document.getElementById("itemCategory").value;

  if(name && price){
    db.collection(category).add({name, price})
      .then(()=>{ alert("ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© âœ…"); document.getElementById("itemName").value=""; document.getElementById("itemPrice").value=""; })
      .catch(err=>alert("Ø­Ø¯Ø« Ø®Ø·Ø£ âŒ "+err));
  } else alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„!");
}

// ====== Accordion ======
const acc = document.getElementsByClassName("accordion");
for(let i=0;i<acc.length;i++){
  acc[i].addEventListener("click",function(){
    this.classList.toggle("active");
    const panel = this.nextElementSibling.nextElementSibling; // ØªØ®Ø·ÙŠ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©
    panel.style.maxHeight = panel.style.maxHeight ? null : panel.scrollHeight + "px";
  });
}

// ====== Ø¨Ø­Ø« Ù…Ø¨Ø§Ø´Ø± ======
document.getElementById("searchInput").addEventListener("input", function(){
  const query = this.value.toLowerCase();
  function filterArray(arr, containerId){
    const filtered = arr.filter(item=>item.name.toLowerCase().includes(query));
    populateItems(filtered,containerId);
  }
  filterArray(spareParts,"spareParts");
  filterArray(accessories,"accessories");
});
</script>

</body>
</html>
